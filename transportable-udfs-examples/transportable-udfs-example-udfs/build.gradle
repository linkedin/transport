buildscript {
  dependencies {
    classpath('com.linkedin.transport:transportable-udfs-plugin')
  }
}

apply plugin: 'java'
apply plugin: 'com.linkedin.transport.plugin'

println 'Running build for Hive, Presto & Spark'
transport.engines = ['hive', 'presto', 'spark']
java {
  toolchain.languageVersion.set(JavaLanguageVersion.of(8))
}

// If the license plugin is applied, disable license checks for the autogenerated source sets
tasks.whenTaskAdded { task ->
  if (task.name.startsWith("licensePresto")
      || task.name.startsWith("licenseHive")
      || task.name.startsWith("licenseSpark")) {
    task.enabled = false
  }
}

dependencies {
  // TODO: Reference all external dependencies from a single gradle file
  compile('com.google.guava:guava:24.1-jre')
  compile('org.apache.commons:commons-io:1.3.2')
}

// TODO: Add a debugPlatform flag to allow debugging specific test methods in IntelliJ
// for a particular platform other than default
