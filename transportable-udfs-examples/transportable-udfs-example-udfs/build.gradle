buildscript {
  dependencies {
    classpath('com.linkedin.transport:transportable-udfs-plugin')
  }
}

apply plugin: 'java'
apply plugin: 'com.linkedin.transport.plugin'

dependencies {
  // TODO: Reference all external dependencies from a single gradle file
  implementation('com.google.guava:guava:24.1-jre')
  implementation('org.apache.commons:commons-io:1.3.2')
}

// As the tasks of trinoDistThinJar and trinoTrinJar are from Transport plugin which is built by Gradle 7.5.1,
// it requires the explicit definition of duplicatesStrategy.
trinoDistThinJar {
  duplicatesStrategy(DuplicatesStrategy.WARN)
}

trinoThinJar {
  duplicatesStrategy(DuplicatesStrategy.WARN)
}

// If the license plugin is applied, disable license checks for the autogenerated source sets
plugins.withId('com.github.hierynomus.license') {
  tasks.getByName('licenseTrino').enabled = false
  tasks.getByName('licenseHive').enabled = false
  tasks.getByName('licenseSpark_2.11').enabled = false
  tasks.getByName('licenseSpark_2.12').enabled = false
}

// TODO: Add a debugPlatform flag to allow debugging specific test methods in IntelliJ
// for a particular platform other than default
